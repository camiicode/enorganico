---
import Swiper from 'swiper/bundle';
import 'swiper/css/bundle';
import coffeeProduct from '../assets/black-coffee-bag-mockup.jpg';
import bgCarouselProducts from '../assets/bg-carousel-products.png';
---

<section id="product-carosuel" class="enorganico enorganic-product-carousel bg-[url('../assets/bg-carousel-products.png')] bg-cover bg-center bg-no-repeat">
  <div class="container-fluid px-0 w-screen h-screen">
    <div class="row flex items-center justify-center w-full h-full">

      <div class="offset-md-1 offset-0 col-md-4 col-12 px-3 px-md-0 enorganico-product-carousel__content">
        <h2 class="text-5xl">Lorem ipsum dolor sit amet.</h2>
        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iure eligendi est assumenda voluptatem officia at iusto excepturi molestias eaque optio!</p>
        <div class="enorganico-product-carosuel__content--button">
          <a href="#" class="btn btn-primary btn-large">Ver productos</a>
        </div>
      </div>
      
      <div class="col-md-7 col-12 enorganico-product-carousel__carousel px-0 h-75">
        <div class="swiper enorganico-product-carousel__carousel--swiper full-width">
          <div class="swiper-wrapper">

            <div class="swiper-slide">
              <div class="swiper-slide__card">
                <h3>Lorem, ipsum dolor.</h3>
                <h5>Lorem, ipsum.</h5>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt esse explicabo, natus itaque pariatur doloribus?</p>
                <span class="price">5.58</span>
                <button class="btn btn-secondary btn-large">Agregar 
                  <span class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                      <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                  </span>
                </button>
              </div>
              <img src={coffeeProduct.src} alt="Product 1" aria-labelledby="Product 1" title="Product 1" tabindex="0"/>
            </div>
            <div class="swiper-slide">
              <div class="swiper-slide__card">
                <h3>Lorem, ipsum dolor.</h3>
                <h5>Lorem, ipsum.</h5>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt esse explicabo, natus itaque pariatur doloribus?</p>
                <span class="price">5.58</span>
                <button class="btn btn-secondary btn-large">Agregar 
                  <span class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                      <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                  </span>
                </button>
              </div>
              <img src={coffeeProduct.src} alt="Product 2" aria-labelledby="Product 2" title="Product 2" tabindex="0"/>
            </div>
            <div class="swiper-slide">
              <div class="swiper-slide__card">
                <h3>Lorem, ipsum dolor.</h3>
                <h5>Lorem, ipsum.</h5>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt esse explicabo, natus itaque pariatur doloribus?</p>
                <span class="price">5.58</span>
                <button class="btn btn-secondary btn-large">Agregar 
                  <span class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                      <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                  </span>
                </button>
              </div>
              <img src={coffeeProduct.src} alt="Product 3" aria-labelledby="Product 3" title="Product 3" tabindex="0"/>
            </div>
            <div class="swiper-slide">
              <div class="swiper-slide__card">
                <h3>Lorem, ipsum dolor.</h3>
                <h5>Lorem, ipsum.</h5>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt esse explicabo, natus itaque pariatur doloribus?</p>
                <span class="price">5.58</span>
                <button class="btn btn-secondary btn-large">Agregar 
                  <span class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                      <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                  </span>
                </button>
              </div>
              <img src={coffeeProduct.src} alt="Product 4" aria-labelledby="Product 4" title="Product 4" tabindex="0"/>
            </div>
            <div class="swiper-slide">
              <div class="swiper-slide__card">
                <h3>Lorem, ipsum dolor.</h3>
                <h5>Lorem, ipsum.</h5>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt esse explicabo, natus itaque pariatur doloribus?</p>
                <span class="price">5.58</span>
                <button class="btn btn-secondary btn-large">Agregar 
                  <span class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                      <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                  </span>
                </button>
              </div>
              <img src={coffeeProduct.src} alt="Product 5" aria-labelledby="Product 5" title="Product 5" tabindex="0"/>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<script is:inline type="module">

  function loadSwiperFromCDN() {
    return new Promise((resolve, reject) => {
      if (typeof Swiper !== 'undefined') {
        resolve();
        return;
      }
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js';
      script.onload = () => {
        resolve();
      };
      script.onerror = () => {
        reject(new Error('Failed to load Swiper from CDN'));
      };
      document.head.appendChild(script);
    });
  }

  document.addEventListener('DOMContentLoaded', async function () {
    try {
      await loadSwiperFromCDN();
      new Swiper(".enorganico-product-carousel__carousel--swiper", {
        slidesPerView: 2.5,
        spaceBetween: 30,
        loop: true,
        autoplay: {
          delay: 5000,
        },
        breakpoints: {
          640: {
            slidesPerView: 1,
            spaceBetween: 10,
          },
          768: {
            slidesPerView: 2,
            spaceBetween: 20,
          },
          1024: {
            slidesPerView: 1.5,
            spaceBetween: 30,
          },
        },
      });
    }
    catch (error) {
      console.log('Error loading Swiper:', error);
    }
  });
</script>

<style lang="scss">
  .enorganico {
    &#product-carosuel {
      width: auto;
      min-width: 100%;
      height: auto;
      min-height: 100dvh;
      overflow: hidden;
      
      .swiper {
        width: 100%;
        height: 100%;
      }
      
      .swiper-slide {
        text-align: center;
        font-size: 18px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;

        &__card {
          position: absolute;
          top: 25%;
          left: 0;
          transform: translate(0%, 0%);
          width: 75%;
          background-color: var(--enorganico-primary-color);
          padding: 2rem;
          display: flex;
          flex-direction: column;
          text-align: left;
          z-index: 1;
          border-radius: 15px;

          h3 {
            font-size: 1.5rem;
            font-weight: var(--enorganico-font-weight-bold);
            color: var(--enorganico-secondary-color);
            text-transform: uppercase;
          }

          h5 {
            font-size: 1.25rem;
            font-weight: var(--enorganico-font-weight-medium);
            color: var(--enorganico-accent-color);
            margin-bottom: 0.5rem;
            font-style: italic;
            text-decoration: underline;
          }

          p {
            font-size: 1rem;
            font-weight: var(--enorganico-font-weight-regular);
            color: var(--enorganico-dark-color);
            margin-bottom: 1rem;
          }

          span.price {
            font-size: 1.5rem;
            font-weight: var(--enorganico-font-weight-bold);
            color: var(--enorganico-secondary-color);
            margin-bottom: 1rem;
            padding-left: 3rem;
            position: relative;

            &::before {
              content: "€";
              position: absolute;
              top: 0;
              left: 5%;
              font-size: 1.5rem;
              font-weight: var(--enorganico-font-weight-bold);
              color: var(--enorganico-secondary-color);
              transform: translate(-50%, 0%);
            }
          }

          .btn {
            width: 50%;
          }

          * {
            margin: 0;
          }
        }
        
        img {
          position: absolute;
          top: 50%;
          right: 0;
          display: block;
          width: 50%;
          height: 35%;
          object-fit: cover;
          border-radius: 15px;
          z-index: 2;
          box-shadow: 5px 5px 10px 1px rgba(0,0,0,.05);
        }
      }
    }

    &-product-carousel {
      &__content {
        h2 {
          font-size: 3rem;
          font-weight: bold;
          text-transform: uppercase;
          color: var(--enorganico-secondary-color);
        }
      }
    }
  }

  @media (max-width: 768px) {
    .enorganico-product-carousel__content {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .enorganico-product-carousel__carousel {
      padding: 0 15px;
    }
  }
</style>